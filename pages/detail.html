<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>商品详情页</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/iconfont.css">
    <link rel="stylesheet" href="../css/detail.css">
</head>
<body>
    <div class="topBar">
        <div class="container">
            <div class="topBar_list">
                <a href="#">小米商城</a>
                <span>|</span>
                <a href="#">mu</a>
                <span>|</span>
                <a href="#">lod</a>
                <span>|</span>
                <a href="#">云服务</a>
                <span>|</span>
                <a href="#">天星数科</a>
                <span>|</span>
                <a href="#">有品小爱</a>
                <span>|</span>
                <a href="#">开放平台</a>
                <span>|</span>
                <a href="#">资质证照</a>
                <span>|</span>
                <a href="#">协议规则</a>
                <span>|</span>
                <a href="#">开放下载</a>
                <span>|</span>
                <a href="#">开放平台</a>
                <span>|</span>          
            </div>
                <div class="shop">
                    <span class="iconfont icon-iconfonticonfontcart"></span>
                    <a href="./cart.html">购物车</a>
                    <i>(0)</i>
                </div>
                <div class="login">
                    <a href="./login.html">登录</a>
                    <span>|</span>
                    <a href="./login.html">注册</a>
                    <span>|</span>
                    <a href="#">消息通知</a>
                </div>
        </div>
    </div>
    <!-- 导航栏 -->
    <div class="header">
        <div class="container">
            <!-- 导航栏顶部 -->
            <div class="header_top">
                <div class="logo">
                    <a href="#"><img src="../images/logo.jpg"></a>
                </div>
                <ul class="nav">
                    <li><a href="javascript:;">小米手机</a></li>
                    <li><a href="javascript:;">Redmi红米</a></li>
                    <li><a href="javascript:;">电视</a></li>
                    <li><a href="javascript:;">笔记本</a></li>
                    <li><a href="javascript:;">家电</a></li>
                    <li><a href="javascript:;">路由器</a></li>
                    <li><a href="javascript:;">智能硬件</a></li>
                    <li><a href="javascript:;">服务社区</a></li>
                </ul>
                <form action="" class="serch">
                    <input type="text" placeholder="小米10">
                    <button>搜索</button>
                </form>
            </div>
        </div>
    </div>
    <!-- 滑动效果 -->
    <div class="fixed">
        <div class="container">
            <img src="../images/defail1.jpg" alt="">
        </div>
    </div>
    <!-- 添加到购物车 -->
    <div class="detail">
        <div class="container clearfix">
            <div class="det_left"><img src="../images/defail3.jpg" alt=""></div>
            <div class="det_gt">
                <h1>手机USB micro数据线</h1>
                <!-- 商品特点 -->
                <p>
                    <span>环保材质 /</span>
                    <span>实用设计 /</span>
                    <span>稳定传输 /</span>
                    <span>轻巧方便</span>
                </p>
                <div class="row_1">
                    <p>小米自营</p>
                    <p>9.9元</p>
                </div>
                <!-- 地址 -->
                <div class="http">
                    <p>
                        <i class="iconfont icon-iconfonticonposition1"></i>
                        <span>北京</span> 
                        <span>北京市海淀区</span> 
                        <span>清河街道</span> 
                        <a href="#">修改</a><br>
                        <a href="#">有现货</a>
                    </p>
                </div>
                <!-- 选择颜色 -->
                <div class="color">
                    <h2>选择颜色</h2>
                    <a href="#">白色</a> 
                </div>
                <!-- 总价 -->
                <div class="price">
                    <p>手机USB micro数据线白色</p>
                    <span>总计 : 9.9元</span>
                </div>
                <!-- 加入购物车 -->
                <div class="jia_car">
                    <a href="javascript:;" id="add"  data-total="1" data-img="../images/shujuxian.jpg" data-id="231232" data-name="小米-二合-数据线100cm 白色" data-price="132" data-num="11">加入购物车</a><a href="#">喜欢</a>
                </div>
            </div>
        </div>
    </div>
    <!--商品图片 -->
    <div class="img_box">
        <div class="container">
            <img src="../images/defail2.jpg" alt="">
        </div>
    </div>
    <script src="../lib/jquery/jquery1.12.4.min.js"></script>
    <script>
        // 打算把数据存储在本地存储的cart这个键里面，值的格式是:[{},{},{}]
        // 每个对象是一个商品
        // 公共方法
        function getCart(){
            var list = localStorage.getItem('cart')||"[]"; //字符串
            return JSON.parse(list);
        }
        function setCart(arr){

            localStorage.setItem('cart',JSON.stringify(arr))
        }
        // 点击加入购物车
        $('#add').click(function(){
            var newProduct = {
                product_id:$('#add').data('id'),
                product_name:$('#add').data('name'),
                product_img:$('#add').data('img'),
                product_price:$('#add').data('price'),
                product_num:$('#add').data('num'),
                product_total:$('#add').data('total')
            };
            // 先获取原来的商品列表数组
            var productList = getCart();
            // 把新商品添加进去
            productList.push(newProduct);//如果有同id商品，不能直接push，要把num增加
            // 存回本地存储
            setCart(productList)
        })
    </script>
</body>
</html>